<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>文档首页</title>
	<!-- Bootstrap -->
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/jquery/jquery-2.1.1.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/bootstrap/js/bootstrap.min.js"></script>
<style type="text/css">

html{
height: 100%
}

body{
	padding: 0px;
	margin: 0px;
}

.container{
	width: 980px;
	background-color: white
}

.file-row{
	padding-bottom: 20px;
}

#fileList{

}

.doc-title-link{
	display: inline-block;
	margin-bottom: 2px;
	padding-right: 3px;
	font-size: 15px;
	font-weight: bold;
	color: #333;
	line-height: 1.2;
	word-break: break-word;
}

.doc-meta {
	margin-top: 1px;
	font-weight: normal;
	color: #999;
	
	position: relative;
display: table-cell;

font-size: 12px;
vertical-align: top;
}


</style>
    
   <script type="text/javascript">
    $(document).ready(function(){
    	
    	var btnNewFile = $("#btnNewFile");
    	btnNewFile.click(function(e){
    		if(isAnonymousUser()){
    			showLoginDialog();// 登录成功后，跳转到之前访问的页面
    			return;
    		}
    		toNewFilePage();
    	});
    	
    	//var loginUser = cookie("zzbj_user");
    	
    	// 从服务器端判断用户是否已经登录
    	var loginUser = null;
    	function isAnonymousUser(){
    		return loginUser == null;
    	}
    	
    	function showLoginDialog(){
    		$("#loginDialog").modal("show");
    	}
    	
    	var fileListUl = $("#fileList");
    	
    	$.getJSON("/files", function(data){
    		$.each(data, function(index, element){
    			var li = $("<li/>", {"class": "list-group-item"});
    			var cell = $("<div/>", {"class": ""});
    			cell.appendTo(li);
    			
    			var a = $("<a></a>",{"class":"doc-title-link"}).attr("href", "/blob/" + element.fileName).html(element.title);
    			a.appendTo(cell);
    			var metaDiv = $("<div/>", {"class": "doc-meta"});
    			metaDiv.appendTo(cell);
    			
    			var aCreateUser = $("<a/>");
    			aCreateUser.html(element.createUserName + " ");
    			aCreateUser.attr("href", "/users/"+element.createUserId);
    			aCreateUser.css("color", "#777");
    			
    			var spanAction = $("<span/>").html("发布于");
    			
    			var timCreate = $("<time/>");
    			timCreate.attr("datetime", element.createTime)
    				.attr("title", element.createTime)
    				.html(element.createTime);
    			
    			aCreateUser.appendTo(metaDiv);
    			spanAction.appendTo(metaDiv);
    			timCreate.appendTo(metaDiv);
    			
    			li.appendTo(fileListUl);
    		});
    	});
    	
    });
    
    
   </script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
    <body style="background-color: black; height: 100%">
    
    
  <!-- 登录/注册弹出框 -->
  <div class="modal fade" id="loginDialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">登录</h4>
      </div>
      <div class="modal-body">
      <div>
       <a href="/login/qq">使用QQ账号登录 <span class="glyphicon glyphicon-chevron-right"></span></a>
      </div>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div style="height: inherit;">
	<div class="container" style="height: inherit;">
		<!-- 工具条 -->
		<div style="margin-top: 10px; margin-bottom: 10px" class="clearfix">
			<div style="float: right; padding-right:20px;" >
				<button id="btnNewFile" type="button" title="创建文档" class="btn btn-default btn-lg">
				  + <span class="glyphicon glyphicon-file"></span>
				</button>
			</div>
		</div>
		<!-- 按照创建时间倒排序，分页，每页30条 -->
		<div >
		
		<div class="panel panel-default">
  			<div class="panel-heading">最新文档</div>

  			<ul class="list-group" id="fileList">
			  
			</ul>
</div>

			
			<!-- 
			<ul class="pagination">
			  <li><a href="#">◀</a></li>
			  <li class="active"><a href="#">1</a></li>
			  <li><a href="#">2</a></li>
			  <li><a href="#">3</a></li>
			  <li><a href="#">4</a></li>
			  <li><a href="#">5</a></li>
			  <li><a href="#">▶</a></li>
			</ul>
			 -->
		</div>
	</div>
</div>



  </body>
</html>