<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="keywords" content="优质文档,深度整理,协作写文档,协作笔记,软件开发,java开发,eclipse,osgi,swift开发,ios开发,android开发,安卓开发,数据库开发,sql语言,笔记,灵感,主题,云笔记">
	<meta name="description" content="孜孜不倦 - 共建共享优质的软件开发技术文档，智能互联每个程序员的智慧。">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- baidu -->
    <meta name="baidu-site-verification" content="kxjeq0VzmV" />
    <!-- qq -->
	<meta property="qc:admins" content="723131631212525166375" />
    <title>孜孜不倦 文档服务</title>
	<!-- Bootstrap -->
    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/jquery/jquery-2.1.1.min.js"></script>
    <script src="/jquery/jquery.cookie.js"></script>
    <script src="/doc/userView.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/bootstrap/js/bootstrap.min.js"></script>
<style type="text/css">

html{
height: 100%
}

body{
	padding: 0px;
	margin: 0px;
}

.container{
	width: 980px;
	background-color: white
}

.file-row{
	padding-bottom: 20px;
}

#fileList{

}

.doc-title-link{
	display: inline-block;
	margin-bottom: 2px;
	padding-right: 3px;
	font-size: 15px;
	font-weight: bold;
	color: #333;
	line-height: 1.2;
	word-break: break-word;
}

.doc-meta {
	margin-top: 1px;
	font-weight: normal;
	color: #999;
	
	position: relative;
display: table-cell;

font-size: 12px;
vertical-align: top;
}


</style>
    
   <script type="text/javascript">
    $(document).ready(function(){
    	
		showUserZone();
    	
    	var btnNewFile = $("#btnNewFile");
    	btnNewFile.click(function(e){
    		if(isAnonymousUser()){
    			showLoginDialog();// 登录成功后，跳转到之前访问的页面
    			return;
    		}
    		toNewFilePage();
    	});
    	
    	function toNewFilePage(){
    		window.location.href = "/files/new";
    	}
    	
    	// 从服务器端判断用户是否已经登录
    	function isAnonymousUser(){
    		return $.cookie("logged_in") != "1";
    	}
    	
    	function showLoginDialog(){
    		$("#loginDialog").modal("show");
    	}
    	
    	/*
    	var fileListUl = $("#fileList");
    	
    	$.getJSON("/files", function(data){
    		$.each(data, function(index, element){
    			var li = $("<li/>", {"class": "list-group-item"});
    			var cell = $("<div/>", {"class": ""});
    			cell.appendTo(li);
    			
    			var a = $("<a></a>",{"class":"doc-title-link"}).attr("href", "/blob/" + element.createUserName + "/" + element.fileName).html(element.title);
    			a.appendTo(cell);
    			var metaDiv = $("<div/>", {"class": "doc-meta"});
    			metaDiv.appendTo(cell);
    			
    			var aCreateUser = $("<a/>");
    			aCreateUser.html(element.createUserName + " ");
    			aCreateUser.attr("href", "/users/"+element.createUserId);
    			aCreateUser.css("color", "#777");
    			
    			var spanAction = $("<span/>").html("发布于");
    			
    			var timCreate = $("<time/>");
    			timCreate.attr("datetime", element.createTime)
    				.attr("title", element.createTime)
    				.html(element.createTime);
    			
    			aCreateUser.appendTo(metaDiv);
    			spanAction.appendTo(metaDiv);
    			timCreate.appendTo(metaDiv);
    			
    			li.appendTo(fileListUl);
    		});
    	});
    	*/
    	
    	
    	// TODO: 如果用户已登录，则显示用户登录信息
    	// TODO: 如果登录成功之后，需要补上邮箱信息（要验证）
    	// 第一版在后台激活
    });
    
    
   </script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
    <body style="background-color: #fff; height: 100%">
    
    
  <!-- 登录/注册弹出框 -->
  <div class="modal fade" id="loginDialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">登录</h4>
      </div>
      <div class="modal-body">
      <div>
       <a href="/login/qq">使用QQ账号登录 <span class="glyphicon glyphicon-chevron-right"></span></a>
      </div>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div style="height: inherit;">
	<div class="container" style="height: inherit;">
		<!-- 工具条 开始 -->
		<div style="margin-top: 10px; margin-bottom: 10px" class="clearfix">
			<div style="float: right; padding-right:20px;">
				<a id="linkUser" href="" style="padding: 4px 8px;
					font-size: 13px;
					font-weight: bold;
					line-height: 20px;
					color: #333;
					text-decoration: none;">
					<img id="imgUser" alt="" src="" style="border-radius: 3px" height="20px"/>
					<span id="spanUser" style=""></span>
				</a>
				
				<button id="btnNewFile" type="button" title="创建文档" class="btn btn-default btn-lg">
				  + <span class="glyphicon glyphicon-file"></span>
				</button>
			</div>
		</div>
		<!-- 工具条 结束 -->
		
		<!-- 按照创建时间倒排序，分页，每页30条 -->
		<div>
		
			<div class="panel panel-default">
	  			<div class="panel-heading">最新文档</div>
	
	  			<ul class="list-group" id="fileList">
				  {{#files}}
				  	<li class="list-group-item">
				  		<div>
				  			<a class="doc-title-link" href="/blob/{{createUserName}}/{{fileName}}">{{title}}</a>
				  			<div class="doc-meta">
				  				<a href="/users/{{createUserId}}" style="color: #777">{{createUserName}} </a>
				  				<span>发布于</span><time datetime="{{createTime}}" title="{{createTime}}">{{createTime}}</time>
				  			</div>
				  		</div>
				  	</li>
				  {{/files}}
				</ul>
			</div>
    			
			
			<!-- 
			<ul class="pagination">
			  <li><a href="#">◀</a></li>
			  <li class="active"><a href="#">1</a></li>
			  <li><a href="#">2</a></li>
			  <li><a href="#">3</a></li>
			  <li><a href="#">4</a></li>
			  <li><a href="#">5</a></li>
			  <li><a href="#">▶</a></li>
			</ul>
			 -->
		</div>
	</div>
</div>



  </body>
</html>